{% extends 'store/main.html' %}
{% load static %}
{% block content %}
     <div class="row">
          <div class="col-lg-6">
               <div class="box-element" id="form-wrapper">
                    <form id="form" method="post" action="{% url 'checkout' %}">
                         {% csrf_token %}
                         <h2>Checkout</h2>
                         <div id="user-info">
                              <hr>
                              <h5>User Information:</h5>
                              <hr>
                              <div class="form-field">
                                   <input required class="form-control" type="text" name="name" placeholder="Name">
                              </div>
                              <div class="form-field">
                                   <input required class="form-control" type="email" name="email" placeholder="Email">
                              </div>
                         </div>

                         <div id="shipping-info">
                              <hr>
                              <h5>Shipping Information</h5>
                              <hr>
                              <div class="form-field">
                                   <input class="form-control" type="text" name="address" placeholder="Address">
                              </div>
                              <div class="form-field">
                                   <input class="form-control" type="text" name="city" placeholder="City">
                              </div>
                              <div class="form-field">
                                   <input class="form-control" type="text" name="state" placeholder="State">
                              </div>
                              <div class="form-field">
                                   <input class="form-control" type="text" name="zipcode" placeholder="Zipcode">
                              </div>
                              <div class="form-field">
                                   <input class="form-control" type="text" name="country" placeholder="Country">
                              </div>
                         </div>
                         
                         <div id="payment-info">
                              <hr>
                              <h5>Payment Information:</h5>
                              <hr>
                              <div class="form-field">
                                   <input class="form-control" type="text" name="cardholder" placeholder="Card Holder" value="{{ payment_info.card_holder }}">
                              </div>
                              <div class="form-field">
                                   <input class="form-control" type="number" name="cardnumber" placeholder="Card Number" value="{{ payment_info.card_number }}">
                              </div>
                              <div class="form-field">
                                   <input class="form-control" type="month" name="expiration" placeholder="Expiration">
                              </div>
                              <div class="form-field">
                                   <input class="form-control" type="number" name="cvv" placeholder="CVV">
                              </div>
                         </div>
                         <hr>
                         <button id="form-button" class="btn btn-success btn-block" type="submit">Checkout</button>
                    </form>
                    <br>
                    <div class="box-element hidden" id="payment-info">
                         <small>Saved Payment Methods</small>
                         <small>PayPal Options</small>
                    </div>
               </div>
          </div>
          <div class="col-lg-6">
               <div class="box-element">
                   <a class="btn btn-outline-dark" href="{% url 'cart' cart_id=request.user.shopping_cart.id %}">&#x2190; Back to Cart</a>
                   <hr>
                   <h2>Order Summary</h2>
                   <hr>
                   <div class="cart-row header">
                       <div style="flex:2;"><strong>Product</strong></div>
                       <div style="flex:2;"><strong>Name</strong></div>
                       <div style="flex:1;"><strong>Price</strong></div>
                       <div style="flex:1;"><strong>Quantity</strong></div>
                       <div style="flex:1;"><strong>Total</strong></div>
                   </div>
                   {% for item in cart_items %}
                   <div class="cart-row">
                       <div style="flex:2;"><img class="row-image" src="{{ item.shoe.image.url }}"></div>
                       <div style="flex:2;"><p>{{ item.shoe.name }}</p></div>
                       <div style="flex:1;"><p>${{ item.shoe.price }}</p></div>
                       <div style="flex:1;"><p>{{ item.quantity }}</p></div>
                       <div style="flex:1;"><p>${{ item.subtotal }}</p></div>
                   </div>
                   {% endfor %}
                   <h5>Items: {{ total_items }}</h5>
                   <h5>Total: ${{ total_amount }}</h5>
               </div>
           </div>
     </div>
{% endblock content %}
